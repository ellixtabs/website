<!DOCTYPE html>
<html>
<head>
    <title>Upvote/Downvote and Comments</title>
    <!-- Include Firebase JavaScript libraries -->
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
</head>
<body>
    <h1>Item Name</h1>
    <button id="upvoteButton">Upvote</button>
    <button id="downvoteButton">Downvote</button>
    <p>Upvotes: <span id="upvotesCount">0</span></p>
    <p>Downvotes: <span id="downvotesCount">0</span></p>

    <!-- Comments Section -->
    <h2>Comments</h2>
    <input type="text" id="commentInput" placeholder="Add a comment">
    <button id="addCommentButton">Add Comment</button>
    <ul id="commentsList"></ul>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCVlX2d9m1yj1y6bZgoZabQW4xaJ8rCG-Q",
            authDomain: "skillbridge-ranks.firebaseapp.com",
            projectId: "skillbridge-ranks",
        };
        firebase.initializeApp(firebaseConfig);

        var database = firebase.database();
        var upvotesRef = database.ref("item/upvotes");
        var downvotesRef = database.ref("item/downvotes");
        var commentsRef = database.ref("item/comments");

        // Update vote counts and comments when page loads
        upvotesRef.on("value", function (snapshot) {
            document.getElementById("upvotesCount").textContent = snapshot.val() || 0;
        });

        downvotesRef.on("value", function (snapshot) {
            document.getElementById("downvotesCount").textContent = snapshot.val() || 0;
        });

        commentsRef.on("child_added", function (snapshot) {
            var comment = snapshot.val();
            var commentList = document.getElementById("commentsList");
            var listItem = document.createElement("li");
            listItem.textContent = comment;
            commentList.appendChild(listItem);
        });

        // Handle upvote and downvote buttons
        document.getElementById("upvoteButton").addEventListener("click", function () {
            upvotesRef.transaction(function (currentValue) {
                return (currentValue || 0) + 1;
            });
        });

        document.getElementById("downvoteButton").addEventListener("click", function () {
            downvotesRef.transaction(function (currentValue) {
                return (currentValue || 0) + 1;
            });
        });

        // Handle adding comments
        document.getElementById("addCommentButton").addEventListener("click", function () {
            var commentInput = document.getElementById("commentInput");
            var newComment = commentInput.value.trim();

            if (newComment !== "") {
                commentsRef.push(newComment);
                commentInput.value = "";
            }
        });
    </script>
</body>
</html>
